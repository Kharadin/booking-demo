{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dimetrius/Documents/BookingApp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/dimetrius/Documents/BookingApp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/dimetrius/Documents/BookingApp/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/dimetrius/Documents/BookingApp/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/dimetrius/Documents/BookingApp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useContext,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{AuthContext}from\"../../context/AuthContext\";import\"./login.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState({username:undefined,password:undefined}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var _useContext=useContext(AuthContext),loading=_useContext.loading,error=_useContext.error,dispatch=_useContext.dispatch;//user,\nvar navigate=useNavigate();var handleChange=function handleChange(e){setCredentials(function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},e.target.id,e.target.value));});};var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"LOGIN_START\"});_context.prev=2;_context.next=5;return axios.post(\"/auth/login\",credentials);case 5:res=_context.sent;dispatch({type:\"LOGIN_SUCCESS\",payload:res.data.details});navigate(\"/\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);dispatch({type:\"LOGIN_FAILURE\",payload:_context.t0.response.data});case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function handleClick(_x){return _ref.apply(this,arguments);};}();// console.log(user)\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"lContainer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",id:\"username\",onChange:handleChange,className:\"lInput\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",id:\"password\",onChange:handleChange,className:\"lInput\"}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,onClick:handleClick,className:\"lButton\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"span\",{children:error.message})]})});};export default Login;","map":{"version":3,"names":["axios","useContext","useState","useNavigate","AuthContext","Login","username","undefined","password","credentials","setCredentials","loading","error","dispatch","navigate","handleChange","e","prev","target","id","value","handleClick","preventDefault","type","post","res","payload","data","details","response","message"],"sources":["/Users/dimetrius/Documents/BookingApp/client/src/pages/login/Login.jsx"],"sourcesContent":["import axios from \"axios\"\nimport { useContext, useState } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport { AuthContext } from \"../../context/AuthContext\"\nimport \"./login.css\"\n\nconst Login = () => {\n     const [credentials, setCredentials] = useState({\n          username: undefined,\n          password: undefined,\n     })\n\n     const { loading, error, dispatch} = useContext(AuthContext)\n     //user,\n\n     const navigate = useNavigate()\n\n\n     const handleChange = (e)=> {\n          setCredentials(prev=>({...prev, [e.target.id]:e.target.value }))\n     }\n\n     const handleClick = async e =>{\n          e.preventDefault()\n          dispatch ({type: \"LOGIN_START\"})\n          try{\n               const res = await axios.post (\"/auth/login\", credentials)\n               dispatch({type: \"LOGIN_SUCCESS\", payload: res.data.details})\n               navigate(\"/\")\n          } catch (err) {\n               dispatch({type: \"LOGIN_FAILURE\", payload:err.response.data})\n          }\n     }\n     // console.log(user)\n\n  return (\n    <div className=\"login\">\n      <div className=\"lContainer\">\n          <input type=\"text\" placeholder= \"username\" id='username' onChange={handleChange} className=\"lInput\" />\n          <input type=\"password\" placeholder=\"password\"  id='password' onChange={handleChange} className=\"lInput\" />\n\n          <button disabled={loading} onClick={handleClick} className=\"lButton\">Login</button>\n          {error && <span>{error.message}</span>}\n      </div>\n\n    </div>\n  )\n}\n\nexport default Login\n "],"mappings":"2pBAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,CAAqBC,QAArB,KAAqC,OAArC,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,OAASC,WAAT,KAA4B,2BAA5B,CACA,MAAO,aAAP,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CACf,cAAsCH,QAAQ,CAAC,CAC1CI,QAAQ,CAAEC,SADgC,CAE1CC,QAAQ,CAAED,SAFgC,CAAD,CAA9C,wCAAOE,WAAP,eAAoBC,cAApB,eAKA,gBAAoCT,UAAU,CAACG,WAAD,CAA9C,CAAQO,OAAR,aAAQA,OAAR,CAAiBC,KAAjB,aAAiBA,KAAjB,CAAwBC,QAAxB,aAAwBA,QAAxB,CACA;AAEA,GAAMC,SAAQ,CAAGX,WAAW,EAA5B,CAGA,GAAMY,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAM,CACtBN,cAAc,CAAC,SAAAO,IAAI,wCAAOA,IAAP,wBAAcD,CAAC,CAACE,MAAF,CAASC,EAAvB,CAA2BH,CAAC,CAACE,MAAF,CAASE,KAApC,IAAL,CAAd,CACJ,CAFD,CAIA,GAAMC,YAAW,4FAAG,iBAAML,CAAN,4HACfA,CAAC,CAACM,cAAF,GACAT,QAAQ,CAAE,CAACU,IAAI,CAAE,aAAP,CAAF,CAAR,CAFe,sCAIQvB,MAAK,CAACwB,IAAN,CAAY,aAAZ,CAA2Bf,WAA3B,CAJR,QAIJgB,GAJI,eAKVZ,QAAQ,CAAC,CAACU,IAAI,CAAE,eAAP,CAAwBG,OAAO,CAAED,GAAG,CAACE,IAAJ,CAASC,OAA1C,CAAD,CAAR,CACAd,QAAQ,CAAC,GAAD,CAAR,CANU,iFAQVD,QAAQ,CAAC,CAACU,IAAI,CAAE,eAAP,CAAwBG,OAAO,CAAC,YAAIG,QAAJ,CAAaF,IAA7C,CAAD,CAAR,CARU,qEAAH,kBAAXN,YAAW,4CAAjB,CAWA;AAEH,mBACE,YAAK,SAAS,CAAC,OAAf,uBACE,aAAK,SAAS,CAAC,YAAf,wBACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAE,UAAhC,CAA2C,EAAE,CAAC,UAA9C,CAAyD,QAAQ,CAAEN,YAAnE,CAAiF,SAAS,CAAC,QAA3F,EADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,WAAW,CAAC,UAAnC,CAA+C,EAAE,CAAC,UAAlD,CAA6D,QAAQ,CAAEA,YAAvE,CAAqF,SAAS,CAAC,QAA/F,EAFJ,cAII,eAAQ,QAAQ,CAAEJ,OAAlB,CAA2B,OAAO,CAAEU,WAApC,CAAiD,SAAS,CAAC,SAA3D,mBAJJ,CAKKT,KAAK,eAAI,sBAAOA,KAAK,CAACkB,OAAb,EALd,GADF,EADF,CAYD,CAzCD,CA2CA,cAAezB,MAAf"},"metadata":{},"sourceType":"module"}